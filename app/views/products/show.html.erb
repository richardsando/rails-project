
<% if notice == 'The item has been successfully added to your cart.' %>
  <div class="message-wrap">
    <%= inline_svg("_ionicons_svg_md-checkmark-circle.svg", class: "check-icon") %>
    <p id="item-added-notice"><%= notice %></p>    <%# need to have a notice that pops up saying that the item was successfully added %>
    
    <% if current_user != nil %>
      <% if current_user.profile != nil %>
  
    <p> <%= link_to 'To cart.', "/profiles/#{current_user.profile.id}/showcart" %> </p>
    <%= link_to inline_svg("_ionicons_svg_md-close.svg", class: "exit-icon"), "/products/#{@product.id}", class: 'exit-link' %>

  </div>
    <% end %>
  <% end %>
<% end %>

  <div class="product-page">

    <% if @product.uploaded_image.attached? %>
          <div id="product-img">
              <%= image_tag @product.uploaded_image.service_url, class: 'image-size' %>
          </div>
    <% else %>
      <p>No image for this product</p>
    <% end %>


    <div class="product-info">
      <h1>
        <%= @product.name %>
      </h1>
      <p class="by-artist">
       Created by
        <strong>
          <%= link_to @product.profile.username, @product.profile  %>
        </strong>
      </p>
<br>
      <p class="description">
        <%= @product.description %>
      </p>

      <p class="price">
        <%= @product.price %>
      </p>
      <% size = ["XS","S","M","L","XL","XXL"] %>
      <p class ="size">
      Size: 
        <%= @product.size %>
      </p>
      <% qty = [1,2,3,4,5,6,7] %>
      <p class="qty">
     qty

      </p>

      <p>
      <strong>Category:</strong>
      <%= 
      if @product.category.category == "T-shirts"
        link_to @product.category.category, '/tshirts'
      elsif @product.category.category == "Stickers"
        link_to @product.category.category, '/stickers'
      elsif @product.category.category == "iPhone cases"
        link_to @product.category.category, '/iphonecases'
      else @product.category.category == "Prints"
        link_to @product.category.category, '/prints'
      end
      %>
      </p>

      <p>
      <strong>Fandom:</strong>
      <%= @product.fandom.fandom%>
      </p>


      <div class = "add-to"> 
          <% if user_signed_in? %>
             <% if current_user.profile != nil %>
               <% if current_user.profile != @product.profile %>
                  <div class="add-to-cart">
                      <%= link_to 'Add to cart', "/profiles/#{current_user.profile.id}/addtocart?product_id=#{@product.id}" %> 
                      </div>

            
            <%#= link_to 'add to wishlist', "/profiles/#{current_user.profile.id}/addtowishlist?product_id=#{@product.id}" %> 
            <div class="wishlist-box">
              <% if current_user.profile.wishlist.products.where("product_id = ?", @product.id).present? %>
                <%# the current product that the user is on has already been added to the wishlist %>
                <%= link_to inline_svg("_ionicons_svg_md-star.svg", class: "wishlist-icon-active"), "/profiles/#{current_user.profile.id}/show-wishlist/remove-item?product_id=#{@product.id}" %>
              <% else %>
                <%= link_to inline_svg("_ionicons_svg_md-star.svg", class: "wishlist-icon-inactive"), "/profiles/#{current_user.profile.id}/addtowishlist?product_id=#{@product.id}" %>
              <% end %>
            </div>

            <%#= link_to 'Back', products_path %>

        <% end %>

        <% if current_user.profile == @product.profile %>
              <%= link_to 'Delete', "/products/#{@product.id}", method: :delete %> |
              <%= link_to 'Edit', edit_product_path(@product) %> |
              <%= link_to 'back to profile', "/profiles/#{@product.profile.id}" %>
        <% end %>
        <% end %>

      <% else %>  <%#user needs to be signed in in order to add the product to their cart or their wishlist %>
        <div class="add-to-cart">
        <%= link_to 'Add to cart', "/users/sign_in", data: { confirm: 'You must log in to add to cart, are you sure?' } %>
        </div>
        <%= link_to 'Add to wishlist', "/users/sign_in", data: { confirm: 'You must log in to add to wishlist, are you sure?' }%>

      <% end %>
      </div>
    </div>



  
